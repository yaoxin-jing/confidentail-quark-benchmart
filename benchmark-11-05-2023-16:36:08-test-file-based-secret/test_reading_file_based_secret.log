apiVersion: v1
kind: Pod
metadata:
  name: test-file-secret
spec:
  volumes:
    - name: my-mongo-persistent-storage
      persistentVolumeClaim:
        claimName: my-mongo-pvc
    - name: my-mongo-config
      configMap:
        name: my-mongo-config
    - name: my-mongo-ssl-certs
      secret:
        secretName: my-mongo-ssl-certs
  runtimeClassName: quark
  containers:
  - name: syscall
    image:  yaoxinjing/file-base-secret-test:latest
    command: ["/usr/src/app/test_get_report_syscall"]
    args: ["1000000"]
    env:
    - name: APPLICATION_NAME
      value: "test_get_report"
    - name: SECRET_MANAGER_IP
      value: "10.221.117.198:8000"
    - name: SHILED_POLICY_PATH
      value: "quark_mongo/mongo_resource/policy"
    - name: FILE_BASED_SECRETS_PATH
      value: "quark_mongo/mongo_resource/rootCaPem"
    volumeMounts:
    - name: my-mongo-ssl-certs
      mountPath: /secret


Baseline:
test passed
main start
test_read_syscall start, loop time is 1000000
read content "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
test_read_syscall_in_ns OurStatistic { mean: 49490.252867471834, min: 45220.0, max: 539841.0, std_deviation: 8537.082037471662, median: 292530.5 }

C-quark
yaoxin@amd-sev-snp2:~/test/confidentail-quark-benchmart$ kubectl logs test-file-secret
main start
test_read_syscall start, loop time is 1000000
read content "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
test_read_syscall_in_ns OurStatistic { mean: 42095.93521406396, min: 39690.0, max: 465031.0, std_deviation: 2380.3592349867295, median: 252360.5 }


