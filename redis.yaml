apiVersion: v1
kind: Pod
metadata:
  name: redis
spec:
  runtimeClassName: quark
  containers:
  - name: redis
    image: redis:latest
    command:
      - redis-server
      # - "/redis-master/redis.conf"
    env:
    - name: MASTER
      value: "true"
    - name: APPLICATION_NAME
      value: "redis-server"
    - name: SECRET_MANAGER_IP
      value: "10.206.133.76:8000"
    - name: SHILED_POLICY_PATH
      value: "quark_mongo/resource/policy"
    ports:
    - containerPort: 6379
    resources:
      limits:
        cpu: "0.1"
    volumeMounts:
    - mountPath: /redis-master-data
      name: my-mongo-persistent-storage
    # - mountPath: /redis-master
    #   name: config
  volumes:
    - name: my-mongo-persistent-storage
      persistentVolumeClaim:
        claimName: my-mongo-pvc
    # - name: config
    #   configMap:
    #     name: test-redis-config
    #     items:
    #     - key: redis-config
    #       path: redis.conf
